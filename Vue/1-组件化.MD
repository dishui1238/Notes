<!--
 * @Author: zqq
 * @Date: 2021-04-17 11:06:22
 * @LastEditTime: 2021-04-17 16:19:51
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /crystal-github/Notes/Vue/1-组件化.MD
-->

# Vue 组件化

## 一、 组件通信

### 1. props

> 父给子传值

```js
// child
props: {
  msg: String;
}

// parent
<HelloWorld msg="Welcome to Your Vue.js App" />;
```

### 2. $emit 自定义事件

> 子给父传值

```js
// child
this.$emit('add', param)
// parent
<Cart @add="cartAdd($event)"></Cart>
```

### 3. 事件总线

> 任意两个组件之间传值

vue 是单页应用，如果你在某一个页面刷新了之后，与之相关的 EventBus 会被移除，这样就导致业务走不下去。还要就是如果业务有反复操作的页面，EventBus 在监听的时候就会触发很多次，也是一个非常大的隐患。这时候我们就需要好好处理 EventBus 在项目中的关系。通常会用到，在 vue 页面销毁时，同时移除 EventBus 事件监听。

### 4. vuex

### 5. \$parent/\$root

兄弟组件之间通信可通过共同祖辈搭桥，$parent或$root。

```js
// brother1
this.$parent.$on("foo", handle);
// brother2
this.$parent.$emit("foo");
```

### 6. \$children

> 父组件可以通过$children 访问子组件实现父子通信

```js
this.$children[0].xx = "emmm";
```

_注意：$children 不能保证子元素的顺序，如果组件通过异步方式加载，虽然声明在前，在 Vue 中注册位置依然在后面_

### 7. \$attrs/\$listeners

> 除了 props 之外的其它特性会被收纳进 $attrs

包含了父作用域中不作为 prop 被识别 (且获取) 的特性绑定 ( class 和 style、事件 除外)。当一个组件没有声明任何 prop 时，这里会包含所有父作用域的绑定 ( class 和 style、事件 除外)，并且可以通过 v- bind="$attrs" 传入内部组件

### 8. refs

> 获取子节点引用

```js
<Child ref="child" />;

this.xx = this.$refs.child.xx;
```

### 9. provide/inject

> 能够实现祖先和后代之间传值

```js
// 祖代
provide() { return {foo: 'foo'} }
// 后代
inject: ['foo']
// 起别名
inject: {
  bar: {from: 'foo'}
}

```

## 二、插槽
